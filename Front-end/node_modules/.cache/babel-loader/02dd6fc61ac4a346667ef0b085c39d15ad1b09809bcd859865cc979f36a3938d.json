{"ast":null,"code":"var _jsxFileName = \"/Users/anasjavaid/Desktop/uOttawa Hackathon/uOttaHack/Front-end/src/components/AnimatedDot.js\";\n// AnimatedDot.js\nimport React, { Component } from 'react';\nimport './AnimatedDot.css';\nimport Messaging from './Messaging';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AnimatedDot extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      notified: false,\n      // Flag to track whether notification has been triggered\n      dotPosition: {\n        x: 0,\n        y: 0\n      } // Initial dot position\n    };\n    this.publishDotPosition = () => {\n      // Get dot position\n      const dotElement = document.getElementById('dot');\n      const position = {\n        x: dotElement.offsetLeft,\n        y: dotElement.offsetTop,\n        car_no: \"CAR-01\"\n      };\n\n      // Update dot position in state\n      this.setState({\n        dotPosition: position\n      });\n\n      // Publish dot position to a topic named 'car'\n      Messaging.publish('cars', JSON.stringify(position));\n    };\n  }\n  componentDidMount() {\n    Messaging.connectWithPromise().then(() => {\n      console.log('Connected to Solace Cloud');\n    }).catch(error => {\n      console.error('Failed to connect to Solace Cloud', error);\n    });\n\n    // Adjust animation duration based on car speed\n    this.adjustDotSpeed(100); // Adjust car speed as needed in km/hr\n\n    // Check proximity and notify periodically (adjust the interval as needed)\n    this.proximityInterval = setInterval(() => {\n      this.checkProximityAndNotify(50); // Adjust the threshold distance as needed\n    }, 1000); // Check every second\n\n    // Publish dot position every 1 second\n    this.publishDotPositionInterval = setInterval(this.publishDotPosition, 1000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.proximityInterval);\n    clearInterval(this.publishDotPositionInterval);\n  }\n  adjustDotSpeed(carSpeedKmPerHour) {\n    const dotElement = document.getElementById('dot');\n    const containerWidth = document.querySelector('.container').clientWidth;\n    const dotWidth = dotElement.offsetWidth;\n    const distanceToTravel = containerWidth - dotWidth; // Distance to travel\n\n    // Calculate time taken to travel the distance at given speed (in milliseconds)\n    const timeTakenInMillis = distanceToTravel / 1000 / (carSpeedKmPerHour / 3600) * 1000;\n\n    // Update animation duration\n    dotElement.style.animationDuration = timeTakenInMillis + 'ms';\n  }\n  calculateDistance(element1, element2) {\n    const rect1 = element1.getBoundingClientRect();\n    const rect2 = element2.getBoundingClientRect();\n    const distance = Math.sqrt(Math.pow(rect1.x - rect2.x, 2) + Math.pow(rect1.y - rect2.y, 2));\n    return distance;\n  }\n  checkProximityAndNotify(thresholdDistance) {\n    const dotElement = document.getElementById('dot');\n    const dotStationElement = document.querySelector('.dot-station');\n    const dotStationElement2 = document.querySelector('.dot-station2');\n    const distance1 = this.calculateDistance(dotElement, dotStationElement);\n    const distance2 = this.calculateDistance(dotElement, dotStationElement2);\n\n    // Update notified state based on proximity\n    if ((distance1 < thresholdDistance || distance2 < thresholdDistance) && !this.state.notified) {\n      alert('Dot is near a dot-station!');\n      this.setState({\n        notified: true\n      }); // Set the flag to true to indicate that notification has been triggered\n    } else if (distance1 >= thresholdDistance && distance2 >= thresholdDistance) {\n      this.setState({\n        notified: false\n      }); // Reset the flag when the dot moves away from the dot-stations\n    }\n  }\n  render() {\n    const {\n      dotPosition\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot\",\n        id: \"dot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot-station\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot-station2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NewsTicker, {\n        dotPosition: dotPosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default AnimatedDot;","map":{"version":3,"names":["React","Component","Messaging","jsxDEV","_jsxDEV","AnimatedDot","constructor","args","state","notified","dotPosition","x","y","publishDotPosition","dotElement","document","getElementById","position","offsetLeft","offsetTop","car_no","setState","publish","JSON","stringify","componentDidMount","connectWithPromise","then","console","log","catch","error","adjustDotSpeed","proximityInterval","setInterval","checkProximityAndNotify","publishDotPositionInterval","componentWillUnmount","clearInterval","carSpeedKmPerHour","containerWidth","querySelector","clientWidth","dotWidth","offsetWidth","distanceToTravel","timeTakenInMillis","style","animationDuration","calculateDistance","element1","element2","rect1","getBoundingClientRect","rect2","distance","Math","sqrt","pow","thresholdDistance","dotStationElement","dotStationElement2","distance1","distance2","alert","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","NewsTicker"],"sources":["/Users/anasjavaid/Desktop/uOttawa Hackathon/uOttaHack/Front-end/src/components/AnimatedDot.js"],"sourcesContent":["// AnimatedDot.js\nimport React, { Component } from 'react';\nimport './AnimatedDot.css';\nimport Messaging from './Messaging';\n\nclass AnimatedDot extends Component {\n  state = {\n    notified: false, // Flag to track whether notification has been triggered\n    dotPosition: { x: 0, y: 0 } // Initial dot position\n  };\n\n  componentDidMount() {\n    Messaging.connectWithPromise()\n      .then(() => {\n        console.log('Connected to Solace Cloud');\n      })\n      .catch((error) => {\n        console.error('Failed to connect to Solace Cloud', error);\n      });\n\n    // Adjust animation duration based on car speed\n    this.adjustDotSpeed(100); // Adjust car speed as needed in km/hr\n\n    // Check proximity and notify periodically (adjust the interval as needed)\n    this.proximityInterval = setInterval(() => {\n      this.checkProximityAndNotify(50); // Adjust the threshold distance as needed\n    }, 1000); // Check every second\n\n    // Publish dot position every 1 second\n    this.publishDotPositionInterval = setInterval(this.publishDotPosition, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.proximityInterval);\n    clearInterval(this.publishDotPositionInterval);\n  }\n\n  adjustDotSpeed(carSpeedKmPerHour) {\n    const dotElement = document.getElementById('dot');\n    const containerWidth = document.querySelector('.container').clientWidth;\n    const dotWidth = dotElement.offsetWidth;\n    const distanceToTravel = containerWidth - dotWidth; // Distance to travel\n\n    // Calculate time taken to travel the distance at given speed (in milliseconds)\n    const timeTakenInMillis =\n      (distanceToTravel / 1000 / (carSpeedKmPerHour / 3600)) * 1000;\n\n    // Update animation duration\n    dotElement.style.animationDuration = timeTakenInMillis + 'ms';\n  }\n\n  calculateDistance(element1, element2) {\n    const rect1 = element1.getBoundingClientRect();\n    const rect2 = element2.getBoundingClientRect();\n    const distance = Math.sqrt(\n      Math.pow(rect1.x - rect2.x, 2) + Math.pow(rect1.y - rect2.y, 2)\n    );\n    return distance;\n  }\n\n  checkProximityAndNotify(thresholdDistance) {\n    const dotElement = document.getElementById('dot');\n    const dotStationElement = document.querySelector('.dot-station');\n    const dotStationElement2 = document.querySelector('.dot-station2');\n    const distance1 = this.calculateDistance(dotElement, dotStationElement);\n    const distance2 = this.calculateDistance(dotElement, dotStationElement2);\n    \n    // Update notified state based on proximity\n    if ((distance1 < thresholdDistance || distance2 < thresholdDistance) && !this.state.notified) {\n      alert('Dot is near a dot-station!');\n      this.setState({ notified: true }); // Set the flag to true to indicate that notification has been triggered\n    } else if (distance1 >= thresholdDistance && distance2 >= thresholdDistance) {\n      this.setState({ notified: false }); // Reset the flag when the dot moves away from the dot-stations\n    }\n  }\n\n  publishDotPosition = () => {\n    // Get dot position\n    const dotElement = document.getElementById('dot');\n    const position = {\n      x: dotElement.offsetLeft,\n      y: dotElement.offsetTop,\n      car_no: \"CAR-01\"\n    };\n\n    // Update dot position in state\n    this.setState({ dotPosition: position });\n\n    // Publish dot position to a topic named 'car'\n    Messaging.publish('cars', JSON.stringify(position));\n  };\n\n  render() {\n    const { dotPosition } = this.state;\n\n    return (\n      <div className=\"container\">\n        <div className=\"line\"></div>\n        <div className=\"dot\" id=\"dot\"></div>\n        <div className=\"dot-station\"></div>\n        <div className=\"dot-station2\"></div>\n        <NewsTicker dotPosition={dotPosition} />\n      </div>\n    );\n  }\n}\n\nexport default AnimatedDot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}