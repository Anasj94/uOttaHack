{"ast":null,"code":"var _jsxFileName = \"/Users/anasjavaid/Desktop/uOttawa Hackathon/uOttaHack/Front-end/src/components/AnimatedDot.js\";\nimport React, { Component } from 'react';\nimport \"./AnimatedDot.css\";\nimport { Client } from 'paho-mqtt';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AnimatedDot extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      notified: false // Flag to track whether notification has been triggered\n    };\n  }\n  componentDidMount() {\n    // Create a client instance\n    this.client = new Client({\n      // Replace with your Solace broker's WebSocket URL\n      hostname: 'mr-connection-a3c5h9h8foc.messaging.solace.cloud',\n      port: 8883,\n      clientId: '01',\n      // Choose any unique client ID\n      protocol: 'wss',\n      username: 'solace-cloud-client',\n      // Replace with your Solace username\n      password: 'ksafhjo4ta84h9b5bjl4s4uqqp' // Replace with your Solace password\n    });\n\n    // Set callback handlers\n    this.client.onConnectionLost = this.onConnectionLost;\n    this.client.onMessageArrived = this.onMessageArrived;\n\n    // Connect the client\n    this.client.connect({\n      onSuccess: () => {\n        console.log('Connected to Solace PubSub+ broker');\n      },\n      onFailure: errorCode => {\n        console.error('Failed to connect to Solace PubSub+ broker', errorCode);\n      }\n    });\n  }\n  componentWillUnmount() {\n    // Disconnect the client when the component unmounts\n    if (this.client.isConnected()) {\n      this.client.disconnect();\n    }\n  }\n  componentWillUnmount() {\n    clearInterval(this.proximityInterval);\n  }\n  adjustDotSpeed(carSpeedKmPerHour) {\n    const dotElement = document.getElementById('dot');\n    const containerWidth = document.querySelector('.container').clientWidth;\n    const dotWidth = dotElement.offsetWidth;\n    const distanceToTravel = containerWidth - dotWidth; // Distance to travel\n\n    // Calculate time taken to travel the distance at given speed (in milliseconds)\n    const timeTakenInMillis = distanceToTravel / 1000 / (carSpeedKmPerHour / 3600) * 1000;\n\n    // Update animation duration\n    dotElement.style.animationDuration = timeTakenInMillis + 'ms';\n  }\n  calculateDistance(element1, element2) {\n    const rect1 = element1.getBoundingClientRect();\n    const rect2 = element2.getBoundingClientRect();\n    const distance = Math.sqrt(Math.pow(rect1.x - rect2.x, 2) + Math.pow(rect1.y - rect2.y, 2));\n    return distance;\n  }\n  checkProximityAndNotify(thresholdDistance) {\n    const dotElement = document.getElementById('dot');\n    const dotStationElement = document.querySelector('.dot-station');\n    const dotStationElement2 = document.querySelector('.dot-station2');\n    const distance1 = this.calculateDistance(dotElement, dotStationElement);\n    const distance2 = this.calculateDistance(dotElement, dotStationElement2);\n    const position = {\n      distance1,\n      distance2\n    };\n    this.client.send('dot/position', JSON.stringify(position));\n    if ((distance1 < thresholdDistance || distance2 < thresholdDistance) && !this.state.notified) {\n      alert('Dot is near a dot-station!');\n      this.setState({\n        notified: true\n      }); // Set the flag to true to indicate that notification has been triggered\n    } else if (distance1 >= thresholdDistance && distance2 >= thresholdDistance) {\n      this.setState({\n        notified: false\n      }); // Reset the flag when the dot moves away from the dot-stations\n    }\n  }\n  componentDidMount() {\n    // Create a client instance\n    this.client = new Client('mr-connection-a3c5h9h8foc.messaging.solace.cloud', '01');\n\n    // Connect the client\n    this.client.connect({\n      onSuccess: () => {\n        console.log('Connected to MQTT broker');\n      },\n      onFailure: errorCode => {\n        console.error('Failed to connect to MQTT broker', errorCode);\n      }\n    });\n  }\n  componentWillUnmount() {\n    if (this.client.isConnected()) {\n      this.client.disconnect();\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot\",\n        id: \"dot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot-station\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot-station2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default AnimatedDot;","map":{"version":3,"names":["React","Component","Client","jsxDEV","_jsxDEV","AnimatedDot","constructor","args","state","notified","componentDidMount","client","hostname","port","clientId","protocol","username","password","onConnectionLost","onMessageArrived","connect","onSuccess","console","log","onFailure","errorCode","error","componentWillUnmount","isConnected","disconnect","clearInterval","proximityInterval","adjustDotSpeed","carSpeedKmPerHour","dotElement","document","getElementById","containerWidth","querySelector","clientWidth","dotWidth","offsetWidth","distanceToTravel","timeTakenInMillis","style","animationDuration","calculateDistance","element1","element2","rect1","getBoundingClientRect","rect2","distance","Math","sqrt","pow","x","y","checkProximityAndNotify","thresholdDistance","dotStationElement","dotStationElement2","distance1","distance2","position","send","JSON","stringify","alert","setState","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id"],"sources":["/Users/anasjavaid/Desktop/uOttawa Hackathon/uOttaHack/Front-end/src/components/AnimatedDot.js"],"sourcesContent":["import React, { Component } from 'react';\nimport \"./AnimatedDot.css\"\nimport { Client } from 'paho-mqtt';\n\n\nclass AnimatedDot extends Component {\n  state = {\n    notified: false // Flag to track whether notification has been triggered\n  };\n\n  componentDidMount() {\n    // Create a client instance\n    this.client = new Client({\n      // Replace with your Solace broker's WebSocket URL\n      hostname: 'mr-connection-a3c5h9h8foc.messaging.solace.cloud',\n      port: 8883,\n      clientId: '01', // Choose any unique client ID\n      protocol: 'wss',\n      username: 'solace-cloud-client', // Replace with your Solace username\n      password: 'ksafhjo4ta84h9b5bjl4s4uqqp', // Replace with your Solace password\n    });\n\n    // Set callback handlers\n    this.client.onConnectionLost = this.onConnectionLost;\n    this.client.onMessageArrived = this.onMessageArrived;\n\n    // Connect the client\n    this.client.connect({\n      onSuccess: () => {\n        console.log('Connected to Solace PubSub+ broker');\n      },\n      onFailure: (errorCode) => {\n        console.error('Failed to connect to Solace PubSub+ broker', errorCode);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    // Disconnect the client when the component unmounts\n    if (this.client.isConnected()) {\n      this.client.disconnect();\n    }\n  }\n\n\n  componentWillUnmount() {\n    clearInterval(this.proximityInterval);\n  }\n\n  adjustDotSpeed(carSpeedKmPerHour) {\n    const dotElement = document.getElementById('dot');\n    const containerWidth = document.querySelector('.container').clientWidth;\n    const dotWidth = dotElement.offsetWidth;\n    const distanceToTravel = containerWidth - dotWidth; // Distance to travel\n\n    // Calculate time taken to travel the distance at given speed (in milliseconds)\n    const timeTakenInMillis =\n      (distanceToTravel / 1000 / (carSpeedKmPerHour / 3600)) * 1000;\n\n    // Update animation duration\n    dotElement.style.animationDuration = timeTakenInMillis + 'ms';\n  }\n\n  calculateDistance(element1, element2) {\n    const rect1 = element1.getBoundingClientRect();\n    const rect2 = element2.getBoundingClientRect();\n    const distance = Math.sqrt(\n      Math.pow(rect1.x - rect2.x, 2) + Math.pow(rect1.y - rect2.y, 2)\n    );\n    return distance;\n  }\n\n  checkProximityAndNotify(thresholdDistance) {\n    const dotElement = document.getElementById('dot');\n    const dotStationElement = document.querySelector('.dot-station');\n    const dotStationElement2 = document.querySelector('.dot-station2');\n    const distance1 = this.calculateDistance(dotElement, dotStationElement);\n    const distance2 = this.calculateDistance(dotElement, dotStationElement2);\n    const position = {distance1,distance2};\n   \n    this.client.send('dot/position', JSON.stringify(position));\n\n    if (\n      (distance1 < thresholdDistance || distance2 < thresholdDistance) &&\n      !this.state.notified\n    ) {\n      alert('Dot is near a dot-station!');\n      this.setState({ notified: true }); // Set the flag to true to indicate that notification has been triggered\n    } else if (distance1 >= thresholdDistance && distance2 >= thresholdDistance) {\n      this.setState({ notified: false }); // Reset the flag when the dot moves away from the dot-stations\n    }\n    \n  }\n\n  componentDidMount() {\n    // Create a client instance\n    this.client = new Client('mr-connection-a3c5h9h8foc.messaging.solace.cloud', '01');\n  \n    // Connect the client\n    this.client.connect({\n      onSuccess: () => {\n        console.log('Connected to MQTT broker');\n      },\n      onFailure: (errorCode) => {\n        console.error('Failed to connect to MQTT broker', errorCode);\n      }\n    });\n  }\n  \n  \n  componentWillUnmount() {\n    if (this.client.isConnected()) {\n      this.client.disconnect();\n    }\n  }\n  \n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"line\"></div>\n        <div className=\"dot\" id=\"dot\"></div>\n        <div className=\"dot-station\"></div>\n        <div className=\"dot-station2\"></div>\n      </div>\n    );\n  }\n}\n\nexport default AnimatedDot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}